<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PIÑATAS FIESTITA POP</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
/>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Reproductor de audio oculto -->
    <audio id="backgroundAudio" class="hidden-audio" loop>
        <source src="https://www.dropbox.com/scl/fi/4k6hmylp0p4ujktnfkzrq/Pi-ata-Fiestita-Pop.mp3?rlkey=e2u896drw9pwspvozq4p3a6v7&st=f8xlzphl&raw=1" type="audio/mpeg">
        Tu navegador no soporta el elemento de audio.
    </audio>

    <!-- Overlay para activar audio -->
    <div id="audioOverlay" class="audio-overlay">
        <button id="audioActivator" class="audio-activator">
            <i class="fas fa-volume-up"></i> BIENVENIDA
        </button>
    </div>

    <!-- Menú Hamburguesa -->
    <div class="hamburger-menu">
        <div class="menu-toggle" id="menuToggle">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>

    <div class="menu-items" id="menuItems">
        <div class="close-menu" id="closeMenu">
            <i class="fas fa-times"></i>
        </div>
        <ul>
            <li><a href="#" id="infoBtn">Información</a></li>
            <li><a href="#" id="miniBtn">Mini</a></li>
            <li><a href="#" id="grandeBtn">Grande</a></li>
            <li><a href="#" id="todasBtn">Todas</a></li>
            <li><a href="compartir.html" id="compartirBtn">Compartir</a></li>
        </ul>
    </div>

    <!-- Modal de Información -->
<div id="infoModal" class="info-modal">
    <div class="info-content">
        <span class="info-close" id="infoClose">&times;</span>
        <p>Bienvenido a <strong>PIÑATAS FIESTITA POP</strong>, tu tienda confiable de piñatas de alta calidad para todo tipo de celebraciones.</p>

        <p>Contamos con una amplia variedad de diseños divertidos y coloridos que harán de tu fiesta un momento inolvidable.</p>

        <p>Todas nuestras piñatas están elaboradas con materiales resistentes y seguros, siguiendo los más altos estándares de calidad.</p>
        
        <div class="gift-highlight">
            <span class="gift-title"><span class="gift-icon">🎁</span>¡Sorpresa especial!</span>
            Las piñatas que tienen el icono de regalo 🎁 incluyen un regalo sorpresa dentro de la piñata para el cumpleañero con un video de felicitaciones por tu cumpleaños.
        </div>

        <p>📲 ¡Atendemos con gusto todas tus dudas y pedidos a través de WhatsApp!</p>
    </div>
</div>
    <p class="Title">PIÑATAS FIESTITA POP</p>

    <div class="swiper myswiper">
        <div class="swiper-wrapper" id="slides-container">
            <!-- Las slides se generarán aleatoriamente con JavaScript -->
        </div>
        <!-- Add pagination -->
        <div class="swiper-pagination"></div>
    </div>

    <!-- Modal para ver imagen con detalle -->
    <div id="imageModal" class="modal">
        <span class="modal-close">&times;</span>
        <img class="modal-content" id="modalImage">
        <div class="modal-caption" id="modalCaption"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
        // Datos de las piñatas
        const pinatas = [
            {
                name: "SONIC",
                price: "$85.00 MXN",
                description: "Mini piñata *Sonic con la siguientes medidas(Alto 41cm x Ancho 19cm).",
                image: "https://i.postimg.cc/fRYxWYv3/20250825-173621.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "LA BELLA",
                price: "$85.00 MXN",
                description: "Mini piñata *La Bella con la siguientes medidas(Alto 45cm x Ancho 21cm).",
                image: "https://i.postimg.cc/DZkHJr9t/20250825-173348.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "LA BUBU",
                price: "$120.00 MXN",
                description: "Mini piñata *Labubu con la siguientes medidas(Alto 49cm x Ancho 26cm).",
                image: "https://i.postimg.cc/Yq3n2KqK/20250825-173113.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "RENE",
                price: "$100.00 MXN",
                description: "Mini piñata *Rene con la siguientes medidas(Alto 40cm x Ancho 25cm).",
                image: "https://i.postimg.cc/wBpqmfqq/IMG-20250825-WA0005.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "MOANA",
                price: "$85.00 MXN",
                description: "Mini piñata *Moana (Alto 37cm x Ancho 18cm).",
                image: "https://i.postimg.cc/yN8ZR8YY/IMG-20250825-WA0006.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "WOODY",
                price: "$90.00 MXN",
                description: "Mini piñata *Woody (Alto 42.05cm x Ancho 26cm).",
                image: "https://i.postimg.cc/SRd4dYyg/IMG-20250825-WA0007.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "FORZEN",
                price: "$80.00 MXN",
                description: "Mini piñata *frozen (Alto 37cm x Ancho 20cm).",
                image: "https://i.postimg.cc/0j2F8WsC/IMG-20250825-WA0008.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            }
            
        ];

        // Variables globales
        let swiper;
        let currentFilter = 'all';

        // Función para extraer el valor numérico del precio
        function getPriceValue(priceString) {
            return parseFloat(priceString.replace(/[^\d.]/g, ''));
        }

        // Función para mezclar array aleatoriamente (algoritmo Fisher-Yates)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Función para filtrar piñatas por tamaño
        function filterPinatasBySize(size) {
            if (size === 'all') {
                return [...pinatas];
            }
            return pinatas.filter(pinata => pinata.size === size);
        }

        // Generar slides basado en el filtro actual
        function generateSlides() {
            const slidesContainer = document.getElementById('slides-container');
            slidesContainer.innerHTML = '';
            
            // Filtrar piñatas según el filtro actual
            const filteredPinatas = filterPinatasBySize(currentFilter);
            const shuffledPinatas = shuffleArray([...filteredPinatas]);
            
            shuffledPinatas.forEach(pinata => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                // Determinar si el precio es mayor a $100
                const priceValue = getPriceValue(pinata.price);
                const showGift = priceValue > 100;
                
                slide.innerHTML = `
                    <div class="icons">
                        <i class="fa-solid fa-circle-arrow-left"></i>
                        <img src="${pinata.logo}" alt="Logo">
                        <i class="fa-regular fa-heart"></i>
                    </div>
                    <div class="product-content">
                        <div class="product-txt">
                            <div class="price-container">
                                <span>${pinata.price}</span>
                                ${showGift ? '<span class="gift-icon">🎁</span>' : ''}
                            </div>
                            <h3>${pinata.name}</h3>
                            <p>${pinata.description}</p>
                        </div>
                        <div class="product-img">
                            <img src="${pinata.image}" alt="${pinata.name}">
                        </div>
                    </div>
                    <a href="#" class="btn-1" onclick="comprarPorWhatsapp('${pinata.name}', '${pinata.price}', '${pinata.description}')">🛒 Comprar</a>
                    <a href="#" class="btn-2" onclick="verDetalles('${pinata.name}', '${pinata.image}')">Ver detalles</a>
                `;
                
                slidesContainer.appendChild(slide);
            });
            
            // Reiniciar Swiper
            if (swiper) {
                swiper.destroy(true, true);
            }
            
            initSwiper();
        }

        // Inicializar Swiper
        function initSwiper() {
            swiper = new Swiper(".myswiper", {
                effect: "coverflow",
                grabCursor: true,
                centeredSlides: true,
                slidesPerView: "auto",
                loop: true,
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                },
                coverflowEffect: {
                    depth: 100,
                    modifier: 1,
                    slideShadows: true,
                    rotate: 0,
                    stretch: 0,
                }
            });
        }

        // Función para iniciar audio
        function iniciarAudio() {
            const backgroundAudio = document.getElementById('backgroundAudio');
            const audioOverlay = document.getElementById('audioOverlay');
            
            // Intentar reproducir el audio
            backgroundAudio.play()
                .then(() => {
                    // Ocultar el overlay si se reproduce correctamente
                    audioOverlay.style.display = 'none';
                })
                .catch(error => {
                    console.log('Error al reproducir audio:', error);
                    // Mostrar el overlay si hay error
                    audioOverlay.style.display = 'flex';
                });
        }

        // Funcionalidad del menú hamburguesa
        function setupMenu() {
            const menuToggle = document.getElementById('menuToggle');
            const menuItems = document.getElementById('menuItems');
            const closeMenu = document.getElementById('closeMenu');
            const infoBtn = document.getElementById('infoBtn');
            const miniBtn = document.getElementById('miniBtn');
            const grandeBtn = document.getElementById('grandeBtn');
            const todasBtn = document.getElementById('todasBtn');
            const infoModal = document.getElementById('infoModal');
            const infoClose = document.getElementById('infoClose');
            
            // Abrir menú
            menuToggle.addEventListener('click', () => {
                menuItems.classList.toggle('active');
                menuToggle.classList.toggle('active');
                document.body.style.overflow = 'hidden';
            });
            
            // Cerrar menú
            closeMenu.addEventListener('click', () => {
                menuItems.classList.remove('active');
                menuToggle.classList.remove('active');
                document.body.style.overflow = 'auto';
            });
            
            // Abrir modal de información
            infoBtn.addEventListener('click', (e) => {
                e.preventDefault();
                menuItems.classList.remove('active');
                menuToggle.classList.remove('active');
                infoModal.classList.add('active');
                document.body.style.overflow = 'hidden';
            });
            
            // Filtrar por Mini
            miniBtn.addEventListener('click', (e) => {
                e.preventDefault();
                menuItems.classList.remove('active');
                menuToggle.classList.remove('active');
                currentFilter = 'mini';
                generateSlides();
                document.body.style.overflow = 'auto';
            });
            
            // Filtrar por Grande
            grandeBtn.addEventListener('click', (e) => {
                e.preventDefault();
                menuItems.classList.remove('active');
                menuToggle.classList.remove('active');
                currentFilter = 'grande';
                generateSlides();
                document.body.style.overflow = 'auto';
            });
            
            // Mostrar todas
            todasBtn.addEventListener('click', (e) => {
                e.preventDefault();
                menuItems.classList.remove('active');
                menuToggle.classList.remove('active');
                currentFilter = 'all';
                generateSlides();
                document.body.style.overflow = 'auto';
            });
            
            // Cerrar modal de información
            infoClose.addEventListener('click', () => {
                infoModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            });
            
            // Cerrar modal al hacer clic fuera
            infoModal.addEventListener('click', (e) => {
                if (e.target === infoModal) {
                    infoModal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            });
            
            // Cerrar menú al hacer clic fuera
            document.addEventListener('click', (e) => {
                const isClickInsideMenu = menuItems.contains(e.target);
                const isClickOnToggle = menuToggle.contains(e.target);
                
                if (!isClickInsideMenu && !isClickOnToggle && menuItems.classList.contains('active')) {
                    menuItems.classList.remove('active');
                    menuToggle.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Configurar evento para el botón de activar audio
            document.getElementById('audioActivator').addEventListener('click', iniciarAudio);
            
            // Intentar iniciar audio automáticamente
            iniciarAudio();
            
            // Configurar menú
            setupMenu();
            
            // Generar slides iniciales
            generateSlides();
            
            // Agregar evento al botón de cerrar modal
            document.querySelector('.modal-close').addEventListener('click', closeModal);
        });

        // Función para enviar mensaje por WhatsApp
        function comprarPorWhatsapp(nombre, precio, descripcion) {
            // Número de teléfono
            const telefono = "524622002744";
            
            // Crear mensaje con la información del producto
            const mensaje = `¡Hola! Estoy interesado en comprar la siguiente piñata:%0A%0A*Producto:* ${nombre}%0A*Precio:* ${precio}%0A*Descripción:* ${descripcion}%0A%0APor favor, necesito más información para completar mi compra.`;
            
            // Crear el enlace de WhatsApp
            const url = `https://wa.me/${telefono}?text=${mensaje}`;
            
            // Abrir WhatsApp en una nueva ventana
            window.open(url, '_blank');
        }

        // Función para ver imagen con detalle
        function verDetalles(nombre, imagenUrl) {
            const modal = document.getElementById('imageModal');
            const modalImg = document.getElementById('modalImage');
            const captionText = document.getElementById('modalCaption');
            
            modal.classList.add('active');
            modalImg.src = imagenUrl;
            captionText.innerHTML = nombre;
            
            // Evitar que el scroll del cuerpo principal se vea afectado
            document.body.style.overflow = 'hidden';
        }

        // Función para cerrar el modal
        function closeModal() {
            const modal = document.getElementById('imageModal');
            modal.classList.remove('active');
            
            // Restaurar el scroll del cuerpo
            document.body.style.overflow = 'auto';
        }

        // Cerrar modal al hacer clic fuera de la imagen
        window.onclick = function(event) {
            const modal = document.getElementById('imageModal');
            if (event.target === modal) {
                closeModal();
            }
            
            const infoModal = document.getElementById('infoModal');
            if (event.target === infoModal) {
                infoModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        };

        // Cerrar modal con la tecla ESC
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeModal();
                
                const infoModal = document.getElementById('infoModal');
                if (infoModal.classList.contains('active')) {
                    infoModal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
                
                const menuItems = document.getElementById('menuItems');
                if (menuItems.classList.contains('active')) {
                    menuItems.classList.remove('active');
                    document.getElementById('menuToggle').classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            }
        });
    </script>
</body>
</html>
