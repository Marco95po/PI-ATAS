<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PIÑATAS FIESTITA POP</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
/>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Reproductor de audio oculto -->
    <audio id="backgroundAudio" class="hidden-audio" loop>
        <source src="https://www.dropbox.com/scl/fi/60vnyq2iy8pp2eukdsqoj/Intro.mp3?rlkey=kq8wwk61uw62ri40fp0ndchw6&st=b9ik8o7b&raw=1" type="audio/mpeg">
        Tu navegador no soporta el elemento de audio.
    </audio>

    <!-- Overlay para activar audio -->
    <div id="audioOverlay" class="audio-overlay">
        <button id="audioActivator" class="audio-activator">
            <i class="fas fa-volume-up"></i> BIENVENIDA
        </button>
    </div>

    <p class="Title">PIÑATAS FIESTITA POP</p>

    <div class="swiper myswiper">
        <div class="swiper-wrapper" id="slides-container">
            <!-- Las slides se generarán aleatoriamente con JavaScript -->
        </div>
        <!-- Add pagination -->
        <div class="swiper-pagination"></div>
    </div>

    <!-- Modal para ver imagen con detalle -->
    <div id="imageModal" class="modal">
        <span class="modal-close">&times;</span>
        <img class="modal-content" id="modalImage">
        <div class="modal-caption" id="modalCaption"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
        // Datos de las piñatas
        const pinatas = [
            {
                name: "Pika chu",
                price: "$89.00 MXN",
                description: "Mini piñata de picacho especial para fiestas infantiles.",
                image: "https://i.postimg.cc/VLnzrsFy/pngwing-com.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png"
            },
            {
                name: "Piñata Especial",
                price: "$89.00 MXN",
                description: "Una piñata única y realmente original para tus fiestas.",
                image: "https://i.postimg.cc/qqM09232/pngwing-com-1.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png"
            },
            {
                name: "Bombero",
                price: "$89.00 MXN",
                description: "Una piñata única y realmente original para tus fiestas.",
                image: "https://i.postimg.cc/qqM09232/pngwing-com-1.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png"
            },
            {
                name: "Princesa",
                price: "$99.00 MXN",
                description: "Piñata temática de princesa para cumpleaños de niñas.",
                image: "https://i.postimg.cc/qqM09232/pngwing-com-1.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png"
            },
            {
                name: "Superhéroe",
                price: "$95.00 MXN",
                description: "Piñata de superhéroe para fiestas infantiles temáticas.",
                image: "https://i.postimg.cc/qqM09232/pngwing-com-1.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png"
            }
        ];

        // Función para mezclar array aleatoriamente (algoritmo Fisher-Yates)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Generar slides de forma aleatoria
        function generateRandomSlides() {
            const slidesContainer = document.getElementById('slides-container');
            const shuffledPinatas = shuffleArray([...pinatas]); // Crear copia para no modificar el original
            
            shuffledPinatas.forEach(pinata => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                slide.innerHTML = `
                    <div class="icons">
                        <i class="fa-solid fa-circle-arrow-left"></i>
                        <img src="${pinata.logo}" alt="Logo">
                        <i class="fa-regular fa-heart"></i>
                    </div>
                    <div class="product-content">
                        <div class="product-txt">
                            <span>${pinata.price}</span>
                            <h3>${pinata.name}</h3>
                            <p>${pinata.description}</p>
                        </div>
                        <div class="product-img">
                            <img src="${pinata.image}" alt="${pinata.name}">
                        </div>
                    </div>
                    <a href="#" class="btn-1" onclick="comprarPorWhatsapp('${pinata.name}', '${pinata.price}', '${pinata.description}')">Comprar</a>
                    <a href="#" class="btn-2" onclick="verDetalles('${pinata.name}', '${pinata.image}')">Ver detalles</a>
                `;
                
                slidesContainer.appendChild(slide);
            });
        }

        // Función para iniciar audio
        function iniciarAudio() {
            const backgroundAudio = document.getElementById('backgroundAudio');
            const audioOverlay = document.getElementById('audioOverlay');
            
            // Intentar reproducir el audio
            backgroundAudio.play()
                .then(() => {
                    // Ocultar el overlay si se reproduce correctamente
                    audioOverlay.style.display = 'none';
                })
                .catch(error => {
                    console.log('Error al reproducir audio:', error);
                    // Mostrar el overlay si hay error
                    audioOverlay.style.display = 'flex';
                });
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Configurar evento para el botón de activar audio
            document.getElementById('audioActivator').addEventListener('click', iniciarAudio);
            
            // Intentar iniciar audio automáticamente
            iniciarAudio();
            
            // Generar slides aleatorios
            generateRandomSlides();
            
            // Inicializar Swiper después de generar los slides
            var swiper = new Swiper(".myswiper", {
                effect: "coverflow",
                grabCursor: true,
                centeredSlides: true,
                slidesPerView: "auto",
                loop: true,
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                },
                coverflowEffect: {
                    depth: 100,
                    modifier: 1,
                    slideShadows: true,
                    rotate: 0,
                    stretch: 0,
                }
            });
            
            // Agregar evento al botón de cerrar modal
            document.querySelector('.modal-close').addEventListener('click', closeModal);
        });

        // Función para enviar mensaje por WhatsApp
        function comprarPorWhatsapp(nombre, precio, descripcion) {
            // Número de teléfono
            const telefono = "524622002744";
            
            // Crear mensaje con la información del producto
            const mensaje = `¡Hola! Estoy interesado en comprar la siguiente piñata:%0A%0A*Producto:* ${nombre}%0A*Precio:* ${precio}%0A*Descripción:* ${descripcion}%0A%0APor favor, necesito más información para completar mi compra.`;
            
            // Crear el enlace de WhatsApp
            const url = `https://wa.me/${telefono}?text=${mensaje}`;
            
            // Abrir WhatsApp en una nueva ventana
            window.open(url, '_blank');
        }

        // Función para ver imagen con detalle
        function verDetalles(nombre, imagenUrl) {
            const modal = document.getElementById('imageModal');
            const modalImg = document.getElementById('modalImage');
            const captionText = document.getElementById('modalCaption');
            
            modal.classList.add('active');
            modalImg.src = imagenUrl;
            captionText.innerHTML = nombre;
            
            // Evitar que el scroll del cuerpo principal se vea afectado
            document.body.style.overflow = 'hidden';
        }

        // Función para cerrar el modal
        function closeModal() {
            const modal = document.getElementById('imageModal');
            modal.classList.remove('active');
            
            // Restaurar el scroll del cuerpo
            document.body.style.overflow = 'auto';
        }

        // Cerrar modal al hacer clic fuera de la imagen
        window.onclick = function(event) {
            const modal = document.getElementById('imageModal');
            if (event.target === modal) {
                closeModal();
            }
        };

        // Cerrar modal con la tecla ESC
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeModal();
            }
        });
    </script>
</body>
</html>
