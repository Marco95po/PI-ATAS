<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PI√ëATAS FIESTITA POP</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
/>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Reproductor de audio oculto -->
    <audio id="backgroundAudio" class="hidden-audio" loop>
        <source src="https://www.dropbox.com/scl/fi/4k6hmylp0p4ujktnfkzrq/Pi-ata-Fiestita-Pop.mp3?rlkey=e2u896drw9pwspvozq4p3a6v7&st=f8xlzphl&raw=1" type="audio/mpeg">
        Tu navegador no soporta el elemento de audio.
    </audio>

    <!-- Overlay para activar audio -->
    <div id="audioOverlay" class="audio-overlay">
        <button id="audioActivator" class="audio-activator">
            <i class="fas fa-volume-up"></i> BIENVENIDA
        </button>
    </div>

    <!-- Men√∫ Hamburguesa -->
    <div class="hamburger-menu">
        <div class="menu-toggle" id="menuToggle">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>

    <div class="menu-items" id="menuItems">
        <div class="close-menu" id="closeMenu">
            <i class="fas fa-times"></i>
        </div>
        <ul>
            <li><a href="#" id="infoBtn">Informaci√≥n</a></li>
            <li><a href="#" id="searchBtn">Buscar pi√±ata</a></li>
            <li><a href="#" id="miniBtn">Mini</a></li>
            <li><a href="#" id="grandeBtn">Grande</a></li>
            <li><a href="#" id="todasBtn">Todas</a></li>
            <li><a href="compartir.html" id="compartirBtn">Compartir</a></li>
        </ul>
    </div>

    <!-- Modal de B√∫squeda -->
    <div id="searchModal" class="search-modal">
        <div class="search-content">
            <span class="search-close" id="searchClose">&times;</span>
            <h2>Buscar Pi√±ata</h2>
            <input type="text" id="searchInput" class="search-input" placeholder="Escribe el nombre de la pi√±ata...">
            <div id="searchResults" class="search-results">
                <!-- Los resultados de b√∫squeda aparecer√°n aqu√≠ -->
            </div>
            <div id="noResults" class="no-results" style="display: none;">
                <h3>¬°Lo sentimos!</h3>
                <p>No encontramos la pi√±ata que buscas, pero estamos creando una especialmente para ti.</p>
                <button class="go-to-all-btn" id="goToAllBtn">Ir a Todas</button>
            </div>
        </div>
    </div>

    <!-- Modal de Informaci√≥n -->
    <div id="infoModal" class="info-modal">
        <div class="info-content">
            <span class="info-close" id="infoClose">&times;</span>
            <p>Bienvenido a <strong>PI√ëATAS FIESTITA POP</strong>, tu tienda confiable de pi√±atas de alta calidad para todo tipo de celebraciones.</p>

            <p>Contamos con una amplia variedad de dise√±os divertidos y coloridos que har√°n de tu fiesta un momento inolvidable.</p>

            <p>Todas nuestras pi√±atas est√°n elaboradas con materiales resistentes y seguros, siguiendo los m√°s altos est√°ndares de calidad.</p>
            
            <div class="gift-highlight">
                <span class="gift-title"><span class="gift-icon">üéÅ</span>¬°Sorpresa especial!</span>
                Las pi√±atas que tienen el icono de regalo üéÅ incluyen un regalo sorpresa dentro de la pi√±ata para el cumplea√±ero con un video de felicitaciones por tu cumplea√±os.
            </div>

            <p>üì≤ ¬°Atendemos con gusto todas tus dudas y pedidos a trav√©s de WhatsApp!</p>
        </div>
    </div>
    
    <p class="Title">PI√ëATAS FIESTITA POP</p>

    <div class="swiper myswiper">
        <div class="swiper-wrapper" id="slides-container">
            <!-- Las slides se generar√°n aleatoriamente con JavaScript -->
        </div>
        <!-- Add pagination -->
        <div class="swiper-pagination"></div>
    </div>

    <!-- Modal para ver imagen con detalle -->
    <div id="imageModal" class="modal">
        <span class="modal-close">&times;</span>
        <div class="modal-content-container">
            <img class="modal-content" id="modalImage">
            <div class="zoom-controls">
                <button class="zoom-btn" id="zoomIn">+</button>
                <button class="zoom-btn" id="zoomOut">-</button>
                <button class="zoom-btn" id="resetZoom">‚Ü∫</button>
            </div>
        </div>
        <div class="modal-caption" id="modalCaption"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
        // Datos de las pi√±atas
        const pinatas = [
            {
                name: "GRANJA DE ZENON",
                price: "$150.00 MXN",
                description: "Mini pi√±ata *Granja de Zenon con la siguientes medidas(Alto 44cm x Ancho 21cm).",
                image: "https://i.postimg.cc/kgBJMqvG/20250829-174913.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "CAMION DE PLIMPLIM",
                price: "$150.00 MXN",
                description: "Mini pi√±ata *Camion de plimplim con la siguientes medidas(Alto 44cm x Ancho 21cm).",
                image: "https://i.postimg.cc/V6sMVymw/20250826-230811.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "MINNIE MOUSE",
                price: "$85.00 MXN",
                description: "Mini pi√±ata *Minnie Mouse con la siguientes medidas(Alto 44cm x Ancho 21cm).",
                image: "https://i.postimg.cc/SNLgDXXp/20250825-191123.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "CARRUAJE DE PRINCESAS",
                price: "$85.00 MXN",
                description: "Mini pi√±ata *carruaje de princesas con la siguientes medidas(Alto 36cm x Ancho 36cm).",
                image: "https://i.postimg.cc/NMhGsPQT/20250825-190430.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "LILO Y STITCH",
                price: "$100.00 MXN",
                description: "Mini pi√±ata *lilo y stitch con la siguientes medidas(Alto 44cm x Ancho 25cm).",
                image: "https://i.postimg.cc/g2qHq1Tc/20250825-190226.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "MARIO BROOS",
                price: "$85.00 MXN",
                description: "Mini pi√±ata *Mario Broos con la siguientes medidas(Alto 33cm x Ancho 36cm).",
                image: "https://i.postimg.cc/ydWNrzQm/20250825-190012.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "CIRCO DE PLIMPLIM",
                price: "$80.00 MXN",
                description: "Mini pi√±ata *Circo de PlimPlim con la siguientes medidas(Alto 31cm x Ancho 37cm).",
                image: "https://i.postimg.cc/htSc5BhX/20250825-184409.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "BALLERINA CAPUCHINA",
                price: "$80.00 MXN",
                description: "Mini pi√±ata *ballerina capuchina con la siguientes medidas(Alto 40cm x Ancho 28cm).",
                image: "https://i.postimg.cc/Jzq4rhS3/20250825-184139.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "JAZMIN",
                price: "$80.00 MXN",
                description: "Mini pi√±ata *Jasmin con la siguientes medidas(Alto 47cm x Ancho 27cm).",
                image: "https://i.postimg.cc/90MQKHLP/20250825-181727.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "VALIENTE",
                price: "$85.00 MXN",
                description: "Mini pi√±ata *Valiente con la siguientes medidas(Alto 37cm x Ancho 20cm).",
                image: "https://i.postimg.cc/zX2gJ0WX/20250825-182018.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "MASHA Y EL OSO",
                price: "$85.00 MXN",
                description: "Mini pi√±ata *Masha y el oso con la siguientes medidas(Alto 39cm x Ancho 20cm).",
                image: "https://i.postimg.cc/65chCrvD/20250825-182203.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "RAPUNZEL",
                price: "$80.00 MXN",
                description: "Mini pi√±ata *Rapunzel con la siguientes medidas(Alto 38cm x Ancho 19cm).",
                image: "https://i.postimg.cc/g0n4zxr1/20250825-181126.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "SONIC",
                price: "$85.00 MXN",
                description: "Mini pi√±ata *Sonic con la siguientes medidas(Alto 41cm x Ancho 19cm).",
                image: "https://i.postimg.cc/fRYxWYv3/20250825-173621.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "LA BELLA",
                price: "$85.00 MXN",
                description: "Mini pi√±ata *La Bella con la siguientes medidas(Alto 45cm x Ancho 21cm).",
                image: "https://i.postimg.cc/DZkHJr9t/20250825-173348.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "LA BUBU",
                price: "$120.00 MXN",
                description: "Mini pi√±ata *Labubu con la siguientes medidas(Alto 49cm x Ancho 26cm).",
                image: "https://i.postimg.cc/Yq3n2KqK/20250825-173113.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "RENE",
                price: "$100.00 MXN",
                description: "Mini pi√±ata *Rene con la siguientes medidas(Alto 40cm x Ancho 25cm).",
                image: "https://i.postimg.cc/wBpqmfqq/IMG-20250825-WA0005.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "MOANA",
                price: "$85.00 MXN",
                description: "Mini pi√±ata *Moana (Alto 37cm x Ancho 18cm).",
                image: "https://i.postimg.cc/yN8ZR8YY/IMG-20250825-WA0006.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "WOODY",
                price: "$90.00 MXN",
                description: "Mini pi√±ata *Woody (Alto 42.05cm x Ancho 26cm).",
                image: "https://i.postimg.cc/SRd4dYyg/IMG-20250825-WA0007.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            },
            {
                name: "FORZEN",
                price: "$80.00 MXN",
                description: "Mini pi√±ata *frozen (Alto 37cm x Ancho 20cm).",
                image: "https://i.postimg.cc/0j2F8WsC/IMG-20250825-WA0008.png",
                logo: "https://i.postimg.cc/vmQTp58h/file-000000004e1461f79e035d00223adff0.png",
                size: "mini"
            }
            // A√±ade m√°s pi√±atas seg√∫n sea necesario
        ];

        // Variables globales
        let swiper;
        let currentFilter = 'all';
        let isZoomed = false;
        let isDragging = false;
        let startX, startY, scrollLeft, scrollTop;
        let scale = 1;
        let posX = 0;
        let posY = 0;
        let lastX, lastY;

        // Funci√≥n para extraer el valor num√©rico del precio
        function getPriceValue(priceString) {
            return parseFloat(priceString.replace(/[^\d.]/g, ''));
        }

        // Funci√≥n para mezclar array aleatoriamente (algoritmo Fisher-Yates)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Funci√≥n para filtrar pi√±atas por tama√±o
        function filterPinatasBySize(size) {
            if (size === 'all') {
                return [...pinatas];
            }
            return pinatas.filter(pinata => pinata.size === size);
        }

        // Generar slides basado en el filtro actual
        function generateSlides() {
            const slidesContainer = document.getElementById('slides-container');
            slidesContainer.innerHTML = '';
            
            // Filtrar pi√±atas seg√∫n el filtro actual
            const filteredPinatas = filterPinatasBySize(currentFilter);
            const shuffledPinatas = shuffleArray([...filteredPinatas]);
            
            shuffledPinatas.forEach(pinata => {
                const slide = document.createElement('div');
                slide.className = 'swiper-slide';
                
                // Determinar si el precio es mayor a $100
                const priceValue = getPriceValue(pinata.price);
                const showGift = priceValue > 100;
                
                slide.innerHTML = `
                    <div class="icons">
                        <i class="fa-solid fa-circle-arrow-left"></i>
                        <img src="${pinata.logo}" alt="Logo">
                        <i class="fa-regular fa-heart"></i>
                    </div>
                    <div class="product-content">
                        <div class="product-txt">
                            <div class="price-container">
                                <span>${pinata.price}</span>
                                ${showGift ? '<span class="gift-icon">üéÅ</span>' : ''}
                            </div>
                            <h3>${pinata.name}</h3>
                            <p>${pinata.description}</p>
                        </div>
                        <div class="product-img">
                            <img src="${pinata.image}" alt="${pinata.name}">
                        </div>
                    </div>
                    <a href="#" class="btn-1" onclick="comprarPorWhatsapp('${pinata.name}', '${pinata.price}', '${pinata.description}')">üõí Comprar</a>
                    <a href="#" class="btn-2" onclick="verDetalles('${pinata.name}', '${pinata.image}')">Ver detalles</a>
                `;
                
                slidesContainer.appendChild(slide);
            });
            
            // Reiniciar Swiper
            if (swiper) {
                swiper.destroy(true, true);
            }
            
            initSwiper();
        }

        // Inicializar Swiper
        function initSwiper() {
            swiper = new Swiper(".myswiper", {
                effect: "coverflow",
                grabCursor: true,
                centeredSlides: true,
                slidesPerView: "auto",
                loop: true,
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                },
                coverflowEffect: {
                    depth: 100,
                    modifier: 1,
                    slideShadows: true,
                    rotate: 0,
                    stretch: 0,
                }
            });
        }

        // Funci√≥n para iniciar audio
        function iniciarAudio() {
            const backgroundAudio = document.getElementById('backgroundAudio');
            const audioOverlay = document.getElementById('audioOverlay');
            
            // Intentar reproducir el audio
            backgroundAudio.play()
                .then(() => {
                    // Ocultar el overlay si se reproduce correctamente
                    audioOverlay.style.display = 'none';
                })
                .catch(error => {
                    console.log('Error al reproducir audio:', error);
                    // Mostrar el overlay si hay error
                    audioOverlay.style.display = 'flex';
                });
        }

        // Funci√≥n para buscar pi√±atas
        function searchPinatas(query) {
            if (!query.trim()) return [];
            
            const searchTerm = query.toLowerCase().trim();
            return pinatas.filter(pinata => 
                pinata.name.toLowerCase().includes(searchTerm)
            );
        }

        // Funci√≥n para mostrar resultados de b√∫squeda
        function displaySearchResults(results) {
            const resultsContainer = document.getElementById('searchResults');
            const noResults = document.getElementById('noResults');
            
            resultsContainer.innerHTML = '';
            
            if (results.length === 0) {
                noResults.style.display = 'block';
                resultsContainer.style.display = 'none';
            } else {
                noResults.style.display = 'none';
                resultsContainer.style.display = 'block';
                
                results.forEach(pinata => {
                    const resultItem = document.createElement('div');
                    resultItem.className = 'search-result-item';
                    resultItem.innerHTML = `
                        <h3>${pinata.name}</h3>
                        <p>${pinata.price} - ${pinata.description}</p>
                    `;
                    
                    resultItem.addEventListener('click', () => {
                        // Cerrar modal de b√∫squeda
                        document.getElementById('searchModal').classList.remove('active');
                        document.body.style.overflow = 'auto';
                        
                        // Filtrar y mostrar solo esta pi√±ata
                        currentFilter = 'search';
                        const slidesContainer = document.getElementById('slides-container');
                        slidesContainer.innerHTML = '';
                        
                        const slide = document.createElement('div');
                        slide.className = 'swiper-slide';
                        
                        const priceValue = getPriceValue(pinata.price);
                        const showGift = priceValue > 100;
                        
                        slide.innerHTML = `
                            <div class="icons">
                                <i class="fa-solid fa-circle-arrow-left"></i>
                                <img src="${pinata.logo}" alt="Logo">
                                <i class="fa-regular fa-heart"></i>
                            </div>
                            <div class="product-content">
                                <div class="product-txt">
                                    <div class="price-container">
                                        <span>${pinata.price}</span>
                                        ${showGift ? '<span class="gift-icon">üéÅ</span>' : ''}
                                    </div>
                                    <h3>${pinata.name}</h3>
                                    <p>${pinata.description}</p>
                                </div>
                                <div class="product-img">
                                    <img src="${pinata.image}" alt="${pinata.name}">
                                </div>
                            </div>
                            <a href="#" class="btn-1" onclick="comprarPorWhatsapp('${pinata.name}', '${pinata.price}', '${pinata.description}')">üõí Comprar</a>
                            <a href="#" class="btn-2" onclick="verDetalles('${pinata.name}', '${pinata.image}')">Ver detalles</a>
                        `;
                        
                        slidesContainer.appendChild(slide);
                        
                        // Reiniciar Swiper
                        if (swiper) {
                            swiper.destroy(true, true);
                        }
                        
                        initSwiper();
                    });
                    
                    resultsContainer.appendChild(resultItem);
                });
            }
        }

        // Configurar funcionalidad de b√∫squeda
        function setupSearch() {
            const searchBtn = document.getElementById('searchBtn');
            const searchModal = document.getElementById('searchModal');
            const searchClose = document.getElementById('searchClose');
            const searchInput = document.getElementById('searchInput');
            const goToAllBtn = document.getElementById('goToAllBtn');
            
            // Abrir modal de b√∫squeda
            searchBtn.addEventListener('click', (e) => {
                e.preventDefault();
                menuItems.classList.remove('active');
                menuToggle.classList.remove('active');
                searchModal.classList.add('active');
                document.body.style.overflow = 'hidden';
                
                // Enfocar el input
                setTimeout(() => {
                    searchInput.focus();
                }, 300);
            });
            
            // Cerrar modal de b√∫squeda
            searchClose.addEventListener('click', () => {
                searchModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            });
            
            // Cerrar modal al hacer clic fuera
            searchModal.addEventListener('click', (e) => {
                if (e.target === searchModal) {
                    searchModal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            });
            
            // Buscar al escribir
            searchInput.addEventListener('input', (e) => {
                const results = searchPinatas(e.target.value);
                displaySearchResults(results);
            });
            
            // Ir a todas las pi√±atas
            goToAllBtn.addEventListener('click', () => {
                searchModal.classList.remove('active');
                document.body.style.overflow = 'auto';
                currentFilter = 'all';
                generateSlides();
            });
        }

        // Funcionalidad del men√∫ hamburguesa
        function setupMenu() {
            const menuToggle = document.getElementById('menuToggle');
            const menuItems = document.getElementById('menuItems');
            const closeMenu = document.getElementById('closeMenu');
            const infoBtn = document.getElementById('infoBtn');
            const miniBtn = document.getElementById('miniBtn');
            const grandeBtn = document.getElementById('grandeBtn');
            const todasBtn = document.getElementById('todasBtn');
            const infoModal = document.getElementById('infoModal');
            const infoClose = document.getElementById('infoClose');
            
            // Abrir men√∫
            menuToggle.addEventListener('click', () => {
                menuItems.classList.toggle('active');
                menuToggle.classList.toggle('active');
                document.body.style.overflow = 'hidden';
            });
            
            // Cerrar men√∫
            closeMenu.addEventListener('click', () => {
                menuItems.classList.remove('active');
                menuToggle.classList.remove('active');
                document.body.style.overflow = 'auto';
            });
            
            // Abrir modal de informaci√≥n
            infoBtn.addEventListener('click', (e) => {
                e.preventDefault();
                menuItems.classList.remove('active');
                menuToggle.classList.remove('active');
                infoModal.classList.add('active');
                document.body.style.overflow = 'hidden';
            });
            
            // Filtrar por Mini
            miniBtn.addEventListener('click', (e) => {
                e.preventDefault();
                menuItems.classList.remove('active');
                menuToggle.classList.remove('active');
                currentFilter = 'mini';
                generateSlides();
                document.body.style.overflow = 'auto';
            });
            
            // Filtrar por Grande
            grandeBtn.addEventListener('click', (e) => {
                e.preventDefault();
                menuItems.classList.remove('active');
                menuToggle.classList.remove('active');
                currentFilter = 'grande';
                generateSlides();
                document.body.style.overflow = 'auto';
            });
            
            // Mostrar todas
            todasBtn.addEventListener('click', (e) => {
                e.preventDefault();
                menuItems.classList.remove('active');
                menuToggle.classList.remove('active');
                currentFilter = 'all';
                generateSlides();
                document.body.style.overflow = 'auto';
            });
            
            // Cerrar modal de informaci√≥n
            infoClose.addEventListener('click', () => {
                infoModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            });
            
            // Cerrar modal al hacer clic fuera
            infoModal.addEventListener('click', (e) => {
                if (e.target === infoModal) {
                    infoModal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            });
            
            // Cerrar men√∫ al hacer clic fuera
            document.addEventListener('click', (e) => {
                const isClickInsideMenu = menuItems.contains(e.target);
                const isClickOnToggle = menuToggle.contains(e.target);
                
                if (!isClickInsideMenu && !isClickOnToggle && menuItems.classList.contains('active')) {
                    menuItems.classList.remove('active');
                    menuToggle.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            });
        }

        // Configurar funcionalidad de zoom y arrastre
        function setupZoomAndDrag() {
            const modalImg = document.getElementById('modalImage');
            const modalContainer = document.querySelector('.modal-content-container');
            const zoomInBtn = document.getElementById('zoomIn');
            const zoomOutBtn = document.getElementById('zoomOut');
            const resetZoomBtn = document.getElementById('resetZoom');
            
            // Doble clic para zoom
            modalImg.addEventListener('dblclick', function(e) {
                e.preventDefault();
                if (scale === 1) {
                    zoomIn();
                } else {
                    resetZoomFunction();
                }
            });
            
            // Botones de zoom
            zoomInBtn.addEventListener('click', zoomIn);
            zoomOutBtn.addEventListener('click', zoomOut);
            resetZoomBtn.addEventListener('click', resetZoomFunction);
            
            // Funciones de zoom
            function zoomIn() {
                if (scale < 3) {
                    scale += 0.5;
                    updateZoom();
                }
            }
            
            function zoomOut() {
                if (scale > 1) {
                    scale -= 0.5;
                    updateZoom();
                }
            }
            
            function resetZoomFunction() {
                scale = 1;
                posX = 0;
                posY = 0;
                updateZoom();
            }
            
            function updateZoom() {
                modalImg.style.transform = `scale(${scale}) translate(${posX}px, ${posY}px)`;
                isZoomed = scale !== 1;
                
                if (isZoomed) {
                    modalImg.classList.add('zoomed');
                } else {
                    modalImg.classList.remove('zoomed');
                }
            }
            
            // Funcionalidad de arrastre
            modalImg.addEventListener('mousedown', startDrag);
            modalImg.addEventListener('touchstart', startDragTouch);
            
            function startDrag(e) {
                if (!isZoomed) return;
                
                e.preventDefault();
                isDragging = true;
                modalImg.classList.add('grabbing');
                
                startX = e.pageX - modalContainer.offsetLeft;
                startY = e.pageY - modalContainer.offsetTop;
                scrollLeft = posX;
                scrollTop = posY;
                
                document.addEventListener('mousemove', onDrag);
                document.addEventListener('mouseup', stopDrag);
            }
            
            function startDragTouch(e) {
                if (!isZoomed) return;
                
                e.preventDefault();
                isDragging = true;
                modalImg.classList.add('grabbing');
                
                const touch = e.touches[0];
                startX = touch.pageX - modalContainer.offsetLeft;
                startY = touch.pageY - modalContainer.offsetTop;
                scrollLeft = posX;
                scrollTop = posY;
                
                document.addEventListener('touchmove', onDragTouch);
                document.addEventListener('touchend', stopDrag);
            }
            
            function onDrag(e) {
                if (!isDragging) return;
                
                e.preventDefault();
                const x = e.pageX - modalContainer.offsetLeft;
                const y = e.pageY - modalContainer.offsetTop;
                const walkX = (x - startX) * 2;
                const walkY = (y - startY) * 2;
                
                posX = scrollLeft + walkX;
                posY = scrollTop + walkY;
                
                // Limitar el movimiento para evitar que la imagen se salga completamente de la vista
                const maxX = (modalImg.width * scale - modalContainer.offsetWidth) / 2;
                const maxY = (modalImg.height * scale - modalContainer.offsetHeight) / 2;
                
                if (scale > 1) {
                    posX = Math.min(Math.max(posX, -maxX), maxX);
                    posY = Math.min(Math.max(posY, -maxY), maxY);
                }
                
                updateZoom();
            }
            
            function onDragTouch(e) {
                if (!isDragging) return;
                
                e.preventDefault();
                const touch = e.touches[0];
                const x = touch.pageX - modalContainer.offsetLeft;
                const y = touch.pageY - modalContainer.offsetTop;
                const walkX = (x - startX) * 2;
                const walkY = (y - startY) * 2;
                
                posX = scrollLeft + walkX;
                posY = scrollTop + walkY;
                
                // Limitar el movimiento para evitar que la imagen se salga completamente de la vista
                const maxX = (modalImg.width * scale - modalContainer.offsetWidth) / 2;
                const maxY = (modalImg.height * scale - modalContainer.offsetHeight) / 2;
                
                if (scale > 1) {
                    posX = Math.min(Math.max(posX, -maxX), maxX);
                    posY = Math.min(Math.max(posY, -maxY), maxY);
                }
                
                updateZoom();
            }
            
            function stopDrag() {
                isDragging = false;
                modalImg.classList.remove('grabbing');
                document.removeEventListener('mousemove', onDrag);
                document.removeEventListener('touchmove', onDragTouch);
                document.removeEventListener('mouseup', stopDrag);
                document.removeEventListener('touchend', stopDrag);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Configurar evento para el bot√≥n de activar audio
            document.getElementById('audioActivator').addEventListener('click', iniciarAudio);
            
            // Intentar iniciar audio autom√°ticamente
            iniciarAudio();
            
            // Configurar men√∫
            setupMenu();
            
            // Configurar b√∫squeda
            setupSearch();
            
            // Configurar zoom y arrastre
            setupZoomAndDrag();
            
            // Generar slides iniciales
            generateSlides();
            
            // Agregar evento al bot√≥n de cerrar modal
            document.querySelector('.modal-close').addEventListener('click', closeModal);
        });

        // Funci√≥n para enviar mensaje por WhatsApp
        function comprarPorWhatsapp(nombre, precio, descripcion) {
            // N√∫mero de tel√©fono
            const telefono = "524622002744";
            
            // Crear mensaje con la informaci√≥n del producto
            const mensaje = `¬°Hola! Estoy interesado en comprar la siguiente pi√±ata:%0A%0A*Producto:* ${nombre}%0A*Precio:* ${precio}%0A*Descripci√≥n:* ${descripcion}%0A%0APor favor, necesito m√°s informaci√≥n para completar mi compra.`;
            
            // Crear el enlace de WhatsApp
            const url = `https://wa.me/${telefono}?text=${mensaje}`;
            
            // Abrir WhatsApp en una nueva ventana
            window.open(url, '_blank');
        }

        // Funci√≥n para ver imagen con detalle
        function verDetalles(nombre, imagenUrl) {
            const modal = document.getElementById('imageModal');
            const modalImg = document.getElementById('modalImage');
            const captionText = document.getElementById('modalCaption');
            
            // Resetear zoom y posici√≥n
            scale = 1;
            posX = 0;
            posY = 0;
            modalImg.style.transform = 'scale(1) translate(0, 0)';
            modalImg.classList.remove('zoomed');
            
            modal.classList.add('active');
            modalImg.src = imagenUrl;
            captionText.innerHTML = nombre;
            
            // Evitar que el scroll del cuerpo principal se vea afectado
            document.body.style.overflow = 'hidden';
        }

        // Funci√≥n para cerrar el modal
        function closeModal() {
            const modal = document.getElementById('imageModal');
            modal.classList.remove('active');
            
            // Restaurar el scroll del cuerpo
            document.body.style.overflow = 'auto';
        }

        // Cerrar modal al hacer clic fuera de la imagen
        window.onclick = function(event) {
            const modal = document.getElementById('imageModal');
            if (event.target === modal) {
                closeModal();
            }
            
            const infoModal = document.getElementById('infoModal');
            if (event.target === infoModal) {
                infoModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
            
            const searchModal = document.getElementById('searchModal');
            if (event.target === searchModal) {
                searchModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        };

        // Cerrar modal con la tecla ESC
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeModal();
                
                const infoModal = document.getElementById('infoModal');
                if (infoModal.classList.contains('active')) {
                    infoModal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
                
                const searchModal = document.getElementById('searchModal');
                if (searchModal.classList.contains('active')) {
                    searchModal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
                
                const menuItems = document.getElementById('menuItems');
                if (menuItems.classList.contains('active')) {
                    menuItems.classList.remove('active');
                    document.getElementById('menuToggle').classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            }
        });
    </script>
</body>
</html>
